<h2>Upload Foto</h2>
<input type="file" id="fileInput">
<button onclick="handleUpload()">Upload</button>

<h2>Galeri</h2>
<div id="gallery"></div>

<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script src="src/storage.js"></script>
<script>
  async function handleUpload() {
    const file = document.getElementById('fileInput').files[0];
    if (!file) return alert("Pilih file dulu!");

    const url = await uploadFile(file);
    if (url) {
      alert("Berhasil upload!");
      loadGallery();
    }
  }

  async function loadGallery() {
    const galleryDiv = document.getElementById('gallery');
    galleryDiv.innerHTML = "";

    const files = await listFiles();
    files.forEach(url => {
      const img = document.createElement("img");
      img.src = url;
      img.style.width = "200px";
      img.style.margin = "5px";
      galleryDiv.appendChild(img);
    });
  }

  // Load galeri saat halaman dibuka
  loadGallery();
</script>
